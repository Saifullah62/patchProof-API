# -------------------------
# PatchProof Auth API — Environment Variables
# -------------------------

# Core
NODE_ENV=production
PORT=3001
API_KEY=z$C&F)J@NcRfUjXn2r5u8x/A?D(G+KbP

# Admin (for /api/svd/canary)
ADMIN_API_KEY=<fd1215a765d55c8bcc7331801394c884223deffd35a28f927c8a7df9a34f4075>

# Logging
LOG_LEVEL=info

# JWT
JWT_SECRET=fUjXn2r5u8x/A?D(G+KbPeShVmYq3s6v

# KMS signing
KMS_SIGN_URL=https://kms.example.com/sign
KMS_API_KEY=replace-with-real-secret
KMS_SIGN_RETRY_ATTEMPTS=3
KMS_SIGN_RETRY_DELAY_MS=1000
ISSUER_KEY_IDENTIFIER=issuer-key-01
SVD_KMS_KID=svd-kms
SVD_USE_KMS=1

# Deterministic key derivation
MASTER_SECRET=b1A+V8gQ5pE7rT2vK9wX4z$C&F)J@NcR

# MongoDB
MONGODB_URI=mongodb+srv://bryan:Y9ugQHIwURVAkKm0@dev-core.9gwjsf.mongodb.net/appdb?retryWrites=true&w=majority&appName=dev-core
DB_NAME=appdb

# CORS
CORS_ALLOWED_ORIGINS=https://proofpatch.com,https://www.proofpatch.com

# SMTP Email
SMTP_HOST=c1106080.sgvps.net
SMTP_PORT=465
SMTP_USER=authenticated@proofpatch.com
SMTP_PASS=rEpack1o1
EMAIL_FROM="PatchProof Auth" <authenticated@proofpatch.com>

# -------------------------
# SVD (Secret Value Distribution) — Passwordless Auth
# -------------------------
# In production, SVD uses KMS for shared-secret derivation. No server-side WIFs.

# Optional knobs (defaults shown)
SVD_CHALLENGE_TTL_SEC=180
SVD_CLOCK_SKEW_SEC=30
SVD_TTL_INDEX_SEC=0
SVD_JANITOR_PERIOD_MS=60000

# Cross-instance replay cache (optional; falls back to memory if unset)
REDIS_URL=<REPLACE_WITH_REDIS_CONNECTION_URL>
# or:
# UPSTASH_REDIS_REST_URL=https://<id>.upstash.io

# -------------------------
# Rate Limiting (optional; defaults shown)
# -------------------------
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_PER_IP=120
RATE_LIMIT_MAX_PER_USER=60

# -------------------------
# SmartLedger dynamic funding (leave blank unless using dynamic mode)
# -------------------------
SMARTLEDGER_API_BASE_URL=
SMARTLEDGER_API_KEY=
FUNDING_ADDRESS=

# -------------------------
# Static UTXO Mode / Legacy Broadcast
# -------------------------
WOC_NETWORK=main
WOC_API_KEY=mainnet_25f041450affbf282a05fed6d05ff580
MERCHANT_API_URL=https://api.whatsonchain.com/v1/bsv/main/tx/raw
WOC_TIMEOUT_MS=4000
WOC_RETRIES=2

# Fees
FEE_PER_KB=512

# Funding UTXO
UTXO_TXID=4ad956b52d3d34f29a7044380aad6fa6031d7852ccb4120aba6a204bb18a9be4
UTXO_OUTPUT_INDEX=0
UTXO_SATOSHIS=1737870
UTXO_SCRIPT_PUB_KEY=76a91465f633261ba3093c6bcecffac20103d7bebe9d2688ac
UTXO_CHANGE_ADDRESS=1BGATxgPpuF8iGmKGQWpX4Rzt7PbjQzFUb

# UTXO Manager Tuning
MIN_UTXO_COUNT=20
MAX_SPLIT_OUTPUTS=50
SPLIT_COOLDOWN_MS=900000
SPLIT_LEASE_MS=300000
UTXO_SPLIT_SIZE_SATS=6000
UTXO_FEE_BUFFER=2500
DUST_THRESHOLD_SATS=2000
DUST_SWEEP_LIMIT=20
UTXO_MIN_CONFIRMATIONS=1

# Health / Maintenance
HEALTH_WOC_CACHE_MS=5000
AUTO_MAINTAIN_ON_HEALTH=1

REDIS_URL=redis://127.0.0.1:6379