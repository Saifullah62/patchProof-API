# PatchProof Environment Example
# Copy to .env and fill values for your environment

# Server
PORT=3001
NODE_ENV=production

# Database (REQUIRED)
MONGODB_URI=
DB_NAME=patchproof

# Auth (REQUIRED)
API_KEY=
JWT_SECRET=
MASTER_SECRET=

# Redis (REQUIRED for rate limits, BullMQ, SVD caches)
REDIS_URL=redis://localhost:6379

# Issuer key derivation (choose one; optional)
# Extended private key for HD derivation (preferred)
ISSUER_XPRV=
# OR deterministic seed fallback
ISSUER_SEED=

# BSV Network configuration
# Use 'main' or 'test'
WOC_NETWORK=test

# UTXO/change management (REQUIRED where noted)
# No WIFs anywhere; signing is handled by external KMS.
UTXO_FUNDING_KEY_IDENTIFIER=   # (REQUIRED) stable key id used by KMS signer
UTXO_FUNDING_ADDRESS=          # (REQUIRED) funding address controlled by the signer
UTXO_CHANGE_ADDRESS=           # (REQUIRED) change/consolidation address
KMS_SIGN_URL=                  # (REQUIRED) HTTPS endpoint of external KMS
KMS_API_KEY=                   # (REQUIRED) API key for KMS
ISSUER_KEY_IDENTIFIER=         # (REQUIRED) issuer key identifier used for patch signing
SVD_KMS_KID=svd-kms            # (optional) active SVD KID label
SVD_USE_KMS=1                  # (recommended) force KMS for SVD even in dev

# UTXO splitter configuration
# Minimum confirmed UTXOs to maintain
MIN_UTXO_COUNT=10
# Fixed split size or min/max band (if both min/max set, jitter is applied)
UTXO_SPLIT_SIZE_SATS=5000
UTXO_SPLIT_SIZE_SATS_MIN=5000
UTXO_SPLIT_SIZE_SATS_MAX=5000
# Upper bound of outputs per split tx
MAX_SPLIT_OUTPUTS=40
# Fee settings
FEE_SAT_PER_BYTE=1
UTXO_FEE_BUFFER=2000
DUST_THRESHOLD_SATS=2000
DUST_SWEEP_LIMIT=20
# Confirmation and pacing
UTXO_MIN_CONFIRMATIONS=0
SPLIT_COOLDOWN_MS=60000
# Dry-run to print plan without broadcasting (1 to enable)
SPLIT_DRY_RUN=0

# Email (if used by your deployment)
SMTP_HOST=
SMTP_PORT=
SMTP_USER=
SMTP_PASS=
EMAIL_FROM=

# Testing toggles (do not set in production)
TEST_FORCE_SIGN_FAIL=
